#:import Factory kivy.factory.Factory

<LaboratorClient>:
    canvas.before:
        Color:
            rgba: 0.5, 0.5, 0.5, 0.3
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        id: main_stack
        orientation: "vertical"
        BoxLayout:
            id: top_menu
            orientation: "horizontal"
            size_hint: 1, None
            size: self.size[0], sp(50)
            TouchableLabel:
                canvas:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        rectangle: self.x, self.y, self.width, self.height
                id: endpoint_label
                text: root.endpoint
                font_size: sp(10)
                text_size: self.size
                padding_x: sp(10)
                halign: 'left'
                valign: 'middle'
                on_release: Factory.EnterEndpointPopup().open(root.endpoint)
            TouchableLabel:
                id: btn_connect
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "»"
                on_release:
                    root.Connect()
            TouchableLabel:
                id: btn_disconnect
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: '⨯'
                disabled: True
                on_release:
                    root.Disconnect()
            Label:
                size_hint_x: None
                size: self.size[1]/4, self.size[1]
            TouchableLabel:
                id: btn_add_graph
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "+"
                on_release:
                    root.AddGraph()
            TouchableLabel:
                id: btn_menu
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "⋮"
                on_release:
                    app.open_settings()
        BoxLayout:
            canvas:
                Color:
                    rgba: 0.5, 0.5, 0.5, 0.1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    width: 1
                    rectangle: self.x, self.y, self.width, self.height
            size_hint: 1, None
            size: self.size[0], sp(10)
            Label:
                id: info_log
                text: "Not connected"
                color: 1,0,0,1
                font_size: sp(8)
        BoxLayout:
            id: view_port
