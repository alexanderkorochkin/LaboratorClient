#:import Factory kivy.factory.Factory

<LaboratorClient>:
    canvas.before:
        Color:
            rgb: 38 / 255, 38 / 255, 38 / 255
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        id: main_stack
        orientation: "vertical"
        BoxLayout:
            id: top_menu
            orientation: "horizontal"
            size_hint: 1, None
            size: self.size[0], sp(50)
            RectangleFlatButton:
                id: endpoint_label
                text: root.endpoint
                font_size: sp(10)
                padding_x: sp(10)
                halign: 'left'
                valign: 'middle'
                on_press: Factory.EnterEndpointPopup().open(root.endpoint)
            RectangleFlatButton:
                id: btn_connect
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "»"
                on_press: root.Connect()
            RectangleFlatButton:
                id: btn_disconnect
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: '⨯'
                disabled: True
                on_press: root.Disconnect()
            Label:
                size_hint_x: None
                size: self.size[1]/4, self.size[1]
            RectangleFlatButton:
                id: btn_add_graph
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "+"
                on_press: root.AddGraph()
            RectangleFlatButton:
                id: btn_menu
                size_hint_x: None
                size: self.size[1], self.size[1]
                font_name: "DejaVuSans.ttf"
                text: "⋮"
                on_press: app.open_settings()
        BoxLayout:
            id: view_port
        BoxLayout:
            size_hint: 1, None
            size: self.size[0], sp(10)
            RectangleFlatButton:
                id: info_log
                text: "Not connected"
                color: 1,0,0,1
                font_size: sp(8)
