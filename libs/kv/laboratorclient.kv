#:import Factory kivy.factory.Factory
#:import get_color_from_hex kivy.utils.get_color_from_hex


<LaboratorClient>:
    MDBoxLayout:
        id: main_stack
        orientation: "vertical"
        padding: [sp(5), sp(5), sp(5), sp(0)]
        spacing: sp(5)
        MDBoxLayout:
            id: top_menu
            orientation: "horizontal"
            adaptive_height: True
            md_bg_color: app.theme_cls.primary_color
            radius: sp(25)
            background_palette: "Primary"
            spacing: sp(10)
            MDAnchorLayout:
                anchor_x: "left"
                size_hint: None, None
                size: self.size[0], sp(50)
                MDBoxLayout:
                    orientation: "horizontal"
                    MDIconButton:
                        id: endpoint_label
                        icon: "ip-outline"
                        theme_icon_color: "Custom"
                        icon_color: "white"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        on_release: app.dialogEndpoint.Open()
                    MDTextButton:
                        id: info_log
                        text: "Not connected"
                        size_hint_x: None
                        size: root.size[0] - right_side_menu.size[0] - endpoint_label.size[0], self.size[1]
                        pos_hint: {"center_x": .5, "center_y": .5}
                        font_size: sp(12)
            MDAnchorLayout:
                anchor_x: "right"
                size_hint_y: None
                size: self.size[0], sp(50)
                MDBoxLayout:
                    id: right_side_menu
                    orientation: "horizontal"
                    adaptive_size: True
                    MDIconButton:
                        id: btn_connect
                        icon: "play"
                        theme_icon_color: "Custom"
                        icon_color: "white"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        on_release: root.Connect()
                    MDIconButton:
                        id: btn_disconnect
                        icon: "stop"
                        theme_icon_color: "Custom"
                        icon_color: "white"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        disabled: True
                        on_release: root.Disconnect()
                    MDIconButton:
                        id: menu_button
                        icon: "dots-vertical"
                        theme_icon_color: "Custom"
                        icon_color: "white"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        on_release: app.menu_open()
        MDBoxLayout:
            id: view_port
        MDBoxLayout:
            id: log_box
            size_hint_y: 1
            MDScrollView:
                id: log_scroll
                do_scroll_x: False
                do_scroll_y: True
                effect_cls: Factory.OpacityScrollEffect
                MDLabel:
                    id: log_label
                    multiline: True
                    size_hint_y: None
                    size: self.texture_size
                    anchor_y: 'bottom'
                    font_size: sp(12)
                    text: "WELCOME TO LOG VIEWER!"

<Item>
    IconLeftWidget:
        icon: root.left_icon
        theme_icon_color: "Custom"
        icon_color: "white"