#:import Window kivy.core.window.Window
#:import get_hex_from_color kivy.utils.get_hex_from_color
#:import OpacityScrollEffect kivy.effects.opacityscroll
#:import ObjectProperty kivy.properties

<HoldMDButton@HoldBehavior+MDFlatButton>:


<MDIconButtonRectangleMy@ButtonBehavior+MDIcon>


<RPoint>:
    canvas:
        Color:
            rgba: root.color
        RoundedRectangle:
            radius: [self.size[0] / 2, ]
            size: self.size
            pos: [self.pos[0] - self.size[0] / 2, self.pos[1] + self.size[0] / 2 + dp(2)]


<GraphBox>:
    MDCard:
        id: mdcard_id
        md_bg_color: app.theme_cls.bg_light
        line_color: [0, 0, 0, 0]
        line_width: dp(1)
        radius: [app.main_radius, app.main_radius, app.main_radius, app.main_radius]
        MDRelativeLayout:
            MDRelativeLayout:
                MDAnchorLayout:
                    id: garden_graph_placer
                    padding: 0, dp(5) + dp(35), dp(5), dp(5) * 2

            MDRelativeLayout:
                MDAnchorLayout:
                    anchor_x: "right"
                    anchor_y: "top"
                    padding: dp(5) * 2, dp(5) * 2, dp(5) * 2, dp(5) * 2
                    MDLabel:
                        id: graph_current_value
                        text: ''
                        markup: True
                        size_hint_y: None
                        size: self.size[0], self.texture_size[1]
                        halign: 'right'
                        font_style: 'Body1'
                MDAnchorLayout:
                    anchor_x: "right"
                    anchor_y: "top"
                    padding: dp(5) * 2, dp(5) * 2 + dp(15), dp(5) * 2, dp(5) * 2
                    MDLabel:
                        id: graph_avg_value
                        text: ''
                        markup: True
                        size_hint_y: None
                        size: self.size[0], self.texture_size[1]
                        halign: 'right'
                        font_style: 'Body2'
            MDRelativeLayout:
                MDAnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    HoldMDButton:
                        size_hint: 1, 1
                        radius: [app.main_radius, app.main_radius, app.main_radius, app.main_radius]
                        on_hold: root.SwitchChooseIt('hold')
                        on_release: root.SwitchChooseIt('release')
                        ripple_canvas_after: True
                        ripple_alpha: .0
                        ripple_scale: 0.0
                        ripple_color: app.theme_cls.accent_color
            MDRelativeLayout:
                MDAnchorLayout:
                    anchor_x: "left"
                    anchor_y: "top"
                    padding: [dp(5) * 2, dp(5) * 2 + dp(2), dp(5) * 2, dp(5) * 2]
                    MDIconButtonRectangleMy:
                        id: graph_settings_button
                        icon: "cog-outline"
                        color: app.theme_cls.accent_color
#                        pos_hint: {"center_x": .5, "center_y": .5}
                        on_release: root.DialogGraphSettingsOpen()
                MDAnchorLayout:
                    anchor_x: "left"
                    anchor_y: "top"
                    padding: dp(5) * 2 + dp(30), dp(5) * 2 - dp(6), dp(5) * 2, dp(5) * 2
                    MDLabel:
                        id: graph_name
                        text: 'None'
                        font_style: 'H6'
                        markup: True
                        size_hint_y: None
                        size: [self.size[0], self.texture_size[1]]
                MDAnchorLayout:
                    anchor_x: "left"
                    anchor_y: "top"
                    padding: dp(5) * 2 + dp(30), dp(5) * 2 + dp(15), dp(5) * 2, dp(5) * 2
                    MDLabel:
                        id: graph_mode
                        text: 'NORMAL'
                        font_style: 'Body2'
                        markup: True
                        size_hint_y: None
                        size: [self.size[0], self.texture_size[1]]

