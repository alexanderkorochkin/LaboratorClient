#:import Window kivy.core.window.Window
#:import get_hex_from_color kivy.utils.get_hex_from_color
#:import OpacityScrollEffect kivy.effects.opacityscroll
#:import ObjectProperty kivy.properties

<GraphBox>:
    MDCard:
        md_bg_color: app.theme_cls.accent_color
        radius: [sp(25), sp(25), sp(25), sp(25)]
        MDRelativeLayout:
            MDRelativeLayout:
                MDAnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    id: garden_graph_placer
            MDRelativeLayout:
                MDAnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    MDLabel:
                        markup: True
                        halign: "center"
                        text: str(root.labvar_value) + " [color=" + get_hex_from_color(app.theme_cls.primary_color) + "](AVG: " + str(root.avg_value) + ")[/color]"
                        font_size: root.width / sp(15)
                MDAnchorLayout:
                    anchor_x: "left"
                    anchor_y: "top"
                    padding: sp(5), sp(5), sp(5), sp(5)
                    MDIconButton:
                        id: btn_close_box
                        icon: "close"
                        theme_icon_color: "Custom"
                        icon_color: "white"
                        on_release: root.DoubleSingleTap()
                MDAnchorLayout:
                    id: var_selection_box
                    anchor_x: "right"
                    anchor_y: "top"
                    padding: sp(5), sp(5), sp(5), sp(5)
                    MDFlatButton:
                        size_hint: None, None
                        size: sp(75), sp(25)
                        font_name: "DejaVuSans.ttf"
                        font_size: sp(12)
                        text: str(root.labvar_name)
                        on_release:
                            app.dialogListLabVar.Open(root.id)


<GraphContainer>:
    container: graph_container
    scrollview: scroll_view

    MDScrollView:
        id: scroll_view
        do_scroll_x: False
        do_scroll_y: True
        effect_cls: Factory.OpacityScrollEffect
        MDGridLayout:
            id: graph_container
            size_hint_y: None
            cols: root.columns
            spacing: sp(5)
            #padding: [sp(5), sp(5), sp(5), sp(5)]
            height: self.minimum_height