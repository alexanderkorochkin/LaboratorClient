#:import Factory kivy.factory.Factory

<TouchableLabel@ButtonBehavior+Label>:
    valign: 'middle'
    halign: "center"

<EnterEndpointPopup>:
    title: "Enter the endpoint URL"
    size_hint: None, None
    size: sp(250), sp(120)
    BoxLayout:
        orientation: "vertical"
        TextInput:
            id: endpoint_input
            text: root.endpoint
            font_size: sp(12)
        Button:
            size_hint: 1, None
            size: self.size[0], sp(30)
            text: 'Enter'
            on_release: root.SaveEndpoint()

<Graph>:
    BoxLayout:
        Label:
            text: "FUCK"

<GraphContainer>:
    container: graph_container
    scrollview: scroll_view

    ScrollView:
        id: scroll_view
        do_scroll_x: False
        do_scroll_y: True
        GridLayout:
            size_hint_y: None
            cols: root.columns
            id: graph_container
            height: self.minimum_height

<LaboratorClientMain>:
    canvas.before:
        Color:
            rgba: 0.5, 0.5, 0.5, 0.3
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        id: main_stack
        orientation: "vertical"
        BoxLayout:
            id: top_menu
            orientation: "horizontal"
            size_hint: 1, None
            size: self.size[0], sp(30)
            TouchableLabel:
                id: endpoint_label
                text: "opc.tcp://192.168.1.22:4840"
                font_size: sp(10)
                on_press: Factory.EnterEndpointPopup().open()
            BoxLayout:
                size_hint: None, 1
                size: sp(150), self.size[1]
                Button:
                    canvas:
                        Color:
                            rgba: 0.5, 1, 0.5, 0.3
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    id: btn_connect
                    text: "C"
                    on_press:
                        root.Connect()
                Button:
                    canvas:
                        Color:
                            rgba: 1, 0.5, 0.5, 0.3
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    id: btn_disconnect
                    text: "D"
                    disabled: True
                    on_press:
                        root.Disconnect()
                Button:
                    id: btn_menu
                    text: "+"
                    on_press:
                        root.AddGraph()
                Button:
                    id: btn_menu
                    text: "-"
                    on_press:
                        root.RemoveGraph()
        BoxLayout:
            size_hint: 1, None
            size: self.size[0], sp(10)
            Label:
                id: info_log
                text: "Not connected"
                color: 1,0,0,1
                font_size: sp(8)
        BoxLayout:
            id: view_port
        BoxLayout:
            id: bottom_menu
            size_hint: 1, None
            size: self.size[0], sp(50)
            Label:
                text: "Not connected"
                color: 1,0,0,1
                font_size: 12